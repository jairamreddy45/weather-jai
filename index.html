<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jairam's Weather App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --sunny: linear-gradient(135deg, #FFD700, #FF8C00);
            --cloudy: linear-gradient(135deg, #B0C4DE, #778899);
            --rainy: linear-gradient(135deg, #4682B4, #5F9EA0);
            --night: linear-gradient(135deg, #0F2027, #203A43, #2C5364);
            --snow: linear-gradient(135deg, #E0F7FA, #B2EBF2);
        }

        body {
            font-family: 'Poppins', sans-serif;
            min-height: 100vh;
            background: var(--cloudy);
            transition: background 1s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: #333;
        }

        body.sunny { background: var(--sunny); }
        body.cloudy { background: var(--cloudy); }
        body.rainy { background: var(--rainy); }
        body.night { background: var(--night); }
        body.snow { background: var(--snow); }

        .container {
            width: 100%;
            max-width: 1200px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .logo {
            font-family: 'Montserrat', sans-serif;
            font-size: 3.5rem;
            font-weight: 900;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00C9FF, #92FE9D);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .logo span {
            color: #00C9FF;
            text-shadow: 0 0 20px rgba(0, 201, 255, 0.5);
        }

        .tagline {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            font-weight: 300;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Current Weather Card */
        .current-weather {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .location {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            width: 100%;
        }

        .location-input {
            flex: 1;
            padding: 15px 25px;
            border: none;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .location-input:focus {
            outline: none;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .search-btn {
            background: linear-gradient(135deg, #00C9FF, #92FE9D);
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 201, 255, 0.3);
        }

        .search-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 201, 255, 0.4);
        }

        .weather-icon {
            font-size: 8rem;
            margin: 20px 0;
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.2));
        }

        .temperature {
            font-size: 5rem;
            font-weight: 700;
            margin: 10px 0;
            color: white;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .description {
            font-size: 1.5rem;
            color: white;
            margin-bottom: 20px;
            text-transform: capitalize;
        }

        .weather-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            width: 100%;
            margin-top: 30px;
        }

        .detail-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(5px);
        }

        .detail-item i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: white;
        }

        .detail-label {
            display: block;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 1.3rem;
            font-weight: 600;
            color: white;
        }

        /* Forecast Card */
        .forecast {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 30px;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .forecast-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .forecast-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .forecast-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(10px);
        }

        .forecast-day {
            width: 100px;
            font-weight: 600;
            color: white;
        }

        .forecast-icon {
            font-size: 2rem;
            color: white;
        }

        .forecast-temp {
            display: flex;
            gap: 20px;
            color: white;
        }

        .forecast-temp span {
            width: 50px;
            text-align: center;
            font-weight: 600;
        }

        .forecast-high {
            color: #FF6B6B;
        }

        .forecast-low {
            color: #4ECDC4;
        }

        /* Favorites Section */
        .favorites {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .favorites-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .favorites-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .favorite-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .favorite-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
        }

        .favorite-name {
            font-weight: 600;
            color: white;
            margin-bottom: 10px;
        }

        .favorite-temp {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
        }

        /* Units Toggle */
        .units-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 50px;
            padding: 10px;
            display: flex;
            gap: 5px;
            z-index: 1000;
        }

        .unit-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 50px;
            background: transparent;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .unit-btn.active {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Loading Animation */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #00C9FF;
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Error Message */
        .error {
            display: none;
            background: rgba(255, 107, 107, 0.9);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Footer */
        footer {
            margin-top: 40px;
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            padding: 20px;
        }

        .highlight {
            color: white;
            font-weight: 600;
        }

        /* Theme Icons */
        .theme-icon.sunny { color: #FFD700; }
        .theme-icon.cloudy { color: #B0C4DE; }
        .theme-icon.rainy { color: #4682B4; }
        .theme-icon.night { color: #2C5364; }
        .theme-icon.snow { color: #E0F7FA; }

        /* Responsive Design */
        @media (max-width: 768px) {
            .logo {
                font-size: 2.5rem;
            }
            
            .temperature {
                font-size: 4rem;
            }
            
            .weather-details {
                grid-template-columns: 1fr;
            }
            
            .favorites-list {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .units-toggle {
                position: static;
                margin-bottom: 20px;
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .main-content, .weather-details, .favorites-list {
                grid-template-columns: 1fr;
            }
            
            .forecast-item {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }
            
            .forecast-temp {
                justify-content: center;
            }
        }
    </style>
</head>
<body class="cloudy">
    <div class="units-toggle">
        <button class="unit-btn active" data-unit="metric">°C</button>
        <button class="unit-btn" data-unit="imperial">°F</button>
    </div>

    <div class="container">
        <div class="header">
            <h1 class="logo">J<span>AI</span>RAM'S<br>WEATHER</h1>
            <p class="tagline">Accurate forecasts at your fingertips</p>
        </div>

        <!-- Error Message -->
        <div class="error" id="errorMessage"></div>

        <!-- Loading -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Loading weather data...</p>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Current Weather -->
            <div class="current-weather">
                <div class="location">
                    <input type="text" 
                           class="location-input" 
                           id="locationInput" 
                           placeholder="Enter city name..."
                           value="New York">
                    <button class="search-btn" id="searchBtn">
                        <i class="fas fa-search"></i>
                        Search
                    </button>
                </div>

                <div class="weather-info">
                    <div class="weather-icon" id="weatherIcon">
                        <i class="fas fa-cloud-sun"></i>
                    </div>
                    <div class="temperature" id="temperature">22°</div>
                    <div class="description" id="description">Partly Cloudy</div>
                    <div class="location-name" id="locationName">New York, US</div>
                </div>

                <div class="weather-details">
                    <div class="detail-item">
                        <i class="fas fa-wind"></i>
                        <span class="detail-label">Wind Speed</span>
                        <span class="detail-value" id="windSpeed">5 km/h</span>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-tint"></i>
                        <span class="detail-label">Humidity</span>
                        <span class="detail-value" id="humidity">65%</span>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-compress-alt"></i>
                        <span class="detail-label">Pressure</span>
                        <span class="detail-value" id="pressure">1013 hPa</span>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-eye"></i>
                        <span class="detail-label">Visibility</span>
                        <span class="detail-value" id="visibility">10 km</span>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-sun"></i>
                        <span class="detail-label">UV Index</span>
                        <span class="detail-value" id="uvIndex">5</span>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-cloud-rain"></i>
                        <span class="detail-label">Precipitation</span>
                        <span class="detail-value" id="precipitation">0 mm</span>
                    </div>
                </div>
            </div>

            <!-- Forecast -->
            <div class="forecast">
                <h2 class="section-title">
                    <i class="fas fa-calendar-alt"></i>
                    5-Day Forecast
                </h2>
                <div class="forecast-list" id="forecastList">
                    <!-- Forecast items will be added here -->
                </div>
            </div>
        </div>

        <!-- Favorites -->
        <div class="favorites">
            <div class="favorites-header">
                <h2 class="section-title">
                    <i class="fas fa-star"></i>
                    Favorite Locations
                </h2>
                <button class="search-btn" id="addFavoriteBtn">
                    <i class="fas fa-plus"></i>
                    Add Current
                </button>
            </div>
            <div class="favorites-list" id="favoritesList">
                <!-- Favorite items will be added here -->
            </div>
        </div>

        <footer>
            <p>Built with <span class="highlight">HTML, CSS & JavaScript</span> by <span class="highlight">Jairam</span></p>
            <p>Weather data provided by OpenWeatherMap API</p>
        </footer>
    </div>

    <script>
        // API Configuration
        const API_KEY = 'YOUR_API_KEY_HERE'; // Replace with your actual API key
        const BASE_URL = 'https://api.openweathermap.org/data/2.5';
        
        // DOM Elements
        const locationInput = document.getElementById('locationInput');
        const searchBtn = document.getElementById('searchBtn');
        const temperatureElement = document.getElementById('temperature');
        const descriptionElement = document.getElementById('description');
        const locationNameElement = document.getElementById('locationName');
        const weatherIconElement = document.getElementById('weatherIcon');
        const forecastList = document.getElementById('forecastList');
        const favoritesList = document.getElementById('favoritesList');
        const addFavoriteBtn = document.getElementById('addFavoriteBtn');
        const errorMessage = document.getElementById('errorMessage');
        const loadingElement = document.getElementById('loading');
        const unitButtons = document.querySelectorAll('.unit-btn');
        
        // Weather detail elements
        const windSpeedElement = document.getElementById('windSpeed');
        const humidityElement = document.getElementById('humidity');
        const pressureElement = document.getElementById('pressure');
        const visibilityElement = document.getElementById('visibility');
        const uvIndexElement = document.getElementById('uvIndex');
        const precipitationElement = document.getElementById('precipitation');
        
        // State
        let currentUnit = 'metric';
        let currentLocation = 'New York';
        let favorites = JSON.parse(localStorage.getItem('weatherFavorites')) || [];
        
        // Weather icon mapping
        const weatherIcons = {
            '01d': 'fas fa-sun sunny',
            '01n': 'fas fa-moon night',
            '02d': 'fas fa-cloud-sun cloudy',
            '02n': 'fas fa-cloud-moon night',
            '03d': 'fas fa-cloud cloudy',
            '03n': 'fas fa-cloud night',
            '04d': 'fas fa-cloud cloudy',
            '04n': 'fas fa-cloud night',
            '09d': 'fas fa-cloud-rain rainy',
            '09n': 'fas fa-cloud-rain night',
            '10d': 'fas fa-cloud-sun-rain rainy',
            '10n': 'fas fa-cloud-moon-rain night',
            '11d': 'fas fa-bolt rainy',
            '11n': 'fas fa-bolt night',
            '13d': 'fas fa-snowflake snow',
            '13n': 'fas fa-snowflake night',
            '50d': 'fas fa-smog cloudy',
            '50n': 'fas fa-smog night'
        };
        
        // Weather theme mapping
        const weatherThemes = {
            'Clear': 'sunny',
            'Clouds': 'cloudy',
            'Rain': 'rainy',
            'Drizzle': 'rainy',
            'Thunderstorm': 'rainy',
            'Snow': 'snow',
            'Mist': 'cloudy',
            'Smoke': 'cloudy',
            'Haze': 'cloudy',
            'Dust': 'cloudy',
            'Fog': 'cloudy',
            'Sand': 'cloudy',
            'Ash': 'cloudy',
            'Squall': 'rainy',
            'Tornado': 'rainy'
        };
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            getWeatherData(currentLocation);
            renderFavorites();
            
            // Load saved unit preference
            const savedUnit = localStorage.getItem('weatherUnit');
            if (savedUnit) {
                currentUnit = savedUnit;
                unitButtons.forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.unit === currentUnit);
                });
            }
        });
        
        // Event Listeners
        searchBtn.addEventListener('click', () => {
            const location = locationInput.value.trim();
            if (location) {
                getWeatherData(location);
            }
        });
        
        locationInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const location = locationInput.value.trim();
                if (location) {
                    getWeatherData(location);
                }
            }
        });
        
        addFavoriteBtn.addEventListener('click', addCurrentToFavorites);
        
        unitButtons.forEach(button => {
            button.addEventListener('click', () => {
                unitButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                currentUnit = button.dataset.unit;
                localStorage.setItem('weatherUnit', currentUnit);
                getWeatherData(currentLocation);
            });
        });
        
        // API Functions
        async function getWeatherData(location) {
            showLoading();
            hideError();
            currentLocation = location;
            
            try {
                // Get current weather
                const currentWeather = await fetchWeatherData(location);
                
                // Get forecast
                const forecastData = await fetchForecastData(location);
                
                // Get air pollution data (for UV index)
                const pollutionData = await fetchAirPollutionData(
                    currentWeather.coord.lat,
                    currentWeather.coord.lon
                );
                
                updateCurrentWeather(currentWeather, pollutionData);
                updateForecast(forecastData);
                updateBackground(currentWeather.weather[0].main);
                
                // Update favorites if this location is in favorites
                updateFavoriteIfExists(currentWeather);
                
            } catch (error) {
                showError(error.message || 'Failed to fetch weather data');
            } finally {
                hideLoading();
            }
        }
        
        async function fetchWeatherData(location) {
            const response = await fetch(
                `${BASE_URL}/weather?q=${location}&units=${currentUnit}&appid=${API_KEY}`
            );
            
            if (!response.ok) {
                throw new Error('City not found. Please try another location.');
            }
            
            return await response.json();
        }
        
        async function fetchForecastData(location) {
            const response = await fetch(
                `${BASE_URL}/forecast?q=${location}&units=${currentUnit}&appid=${API_KEY}`
            );
            
            if (!response.ok) {
                throw new Error('Failed to fetch forecast data');
            }
            
            return await response.json();
        }
        
        async function fetchAirPollutionData(lat, lon) {
            try {
                const response = await fetch(
                    `${BASE_URL}/air_pollution?lat=${lat}&lon=${lon}&appid=${API_KEY}`
                );
                
                if (!response.ok) {
                    return { list: [{ components: { no2: 0 } }] };
                }
                
                return await response.json();
            } catch (error) {
                return { list: [{ components: { no2: 0 } }] };
            }
        }
        
        // Update UI Functions
        function updateCurrentWeather(data, pollutionData) {
            // Temperature
            const temp = Math.round(data.main.temp);
            temperatureElement.textContent = `${temp}°${currentUnit === 'metric' ? 'C' : 'F'}`;
            
            // Location name
            locationNameElement.textContent = `${data.name}, ${data.sys.country}`;
            
            // Weather description
            const description = data.weather[0].description;
            descriptionElement.textContent = description;
            
            // Weather icon
            const iconCode = data.weather[0].icon;
            const iconClass = weatherIcons[iconCode] || 'fas fa-cloud';
            weatherIconElement.innerHTML = `<i class="${iconClass}"></i>`;
            
            // Weather details
            const windSpeed = currentUnit === 'metric' ? 
                `${Math.round(data.wind.speed * 3.6)} km/h` : 
                `${Math.round(data.wind.speed)} mph`;
            windSpeedElement.textContent = windSpeed;
            
            humidityElement.textContent = `${data.main.humidity}%`;
            pressureElement.textContent = `${data.main.pressure} hPa`;
            
            const visibility = currentUnit === 'metric' ?
                `${(data.visibility / 1000).toFixed(1)} km` :
                `${(data.visibility / 1609).toFixed(1)} mi`;
            visibilityElement.textContent = visibility;
            
            // Calculate UV index from pollution data (simplified)
            const uvIndex = Math.min(Math.round(pollutionData.list[0].components.no2 / 20), 11);
            uvIndexElement.textContent = uvIndex;
            
            // Precipitation (rain or snow in last hour)
            const precipitation = data.rain?.['1h'] || data.snow?.['1h'] || 0;
            precipitationElement.textContent = `${precipitation} mm`;
        }
        
        function updateForecast(data) {
            forecastList.innerHTML = '';
            
            // Group forecast by day and get daily max/min temps
            const dailyForecasts = {};
            
            data.list.forEach(item => {
                const date = new Date(item.dt * 1000);
                const day = date.toLocaleDateString('en-US', { weekday: 'short' });
                const dateKey = date.toDateString();
                
                if (!dailyForecasts[dateKey]) {
                    dailyForecasts[dateKey] = {
                        day: day,
                        date: date,
                        temps: [],
                        icon: item.weather[0].icon,
                        description: item.weather[0].description
                    };
                }
                
                dailyForecasts[dateKey].temps.push(item.main.temp);
                dailyForecasts[dateKey].icon = item.weather[0].icon; // Keep last icon of the day
            });
            
            // Display next 5 days
            const forecastDays = Object.values(dailyForecasts).slice(0, 5);
            
            forecastDays.forEach(dayData => {
                const maxTemp = Math.round(Math.max(...dayData.temps));
                const minTemp = Math.round(Math.min(...dayData.temps));
                const iconClass = weatherIcons[dayData.icon] || 'fas fa-cloud';
                
                const forecastItem = document.createElement('div');
                forecastItem.className = 'forecast-item';
                forecastItem.innerHTML = `
                    <div class="forecast-day">${dayData.day}</div>
                    <div class="forecast-icon">
                        <i class="${iconClass}"></i>
                    </div>
                    <div class="forecast-description">${dayData.description}</div>
                    <div class="forecast-temp">
                        <span class="forecast-high">${maxTemp}°</span>
                        <span class="forecast-low">${minTemp}°</span>
                    </div>
                `;
                
                forecastList.appendChild(forecastItem);
            });
        }
        
        function updateBackground(weatherCondition) {
            // Remove all weather classes
            document.body.className = '';
            
            // Add the appropriate weather class
            const themeClass = weatherThemes[weatherCondition] || 'cloudy';
            document.body.classList.add(themeClass);
        }
        
        // Favorites Functions
        function addCurrentToFavorites() {
            const currentLocation = locationNameElement.textContent;
            const currentTemp = temperatureElement.textContent;
            const currentDesc = descriptionElement.textContent;
            
            // Check if already in favorites
            if (favorites.some(fav => fav.name === currentLocation)) {
                showNotification('Location already in favorites!', 'info');
                return;
            }
            
            // Add to favorites
            const favorite = {
                name: currentLocation,
                temp: currentTemp,
                desc: currentDesc,
                query: locationInput.value.trim() || 'New York'
            };
            
            favorites.push(favorite);
            saveFavorites();
            renderFavorites();
            showNotification('Added to favorites!', 'success');
        }
        
        function renderFavorites() {
            favoritesList.innerHTML = '';
            
            if (favorites.length === 0) {
                favoritesList.innerHTML = `
                    <div class="favorite-item" style="grid-column: 1/-1; text-align: center; opacity: 0.7;">
                        <p>No favorite locations yet. Search for a city and click "Add Current"!</p>
                    </div>
                `;
                return;
            }
            
            favorites.forEach((favorite, index) => {
                const favoriteItem = document.createElement('div');
                favoriteItem.className = 'favorite-item';
                favoriteItem.innerHTML = `
                    <div class="favorite-name">${favorite.name}</div>
                    <div class="favorite-temp">${favorite.temp}</div>
                    <div class="favorite-desc">${favorite.desc}</div>
                `;
                
                favoriteItem.addEventListener('click', () => {
                    locationInput.value = favorite.query;
                    getWeatherData(favorite.query);
                });
                
                // Add delete button
                const deleteBtn = document.createElement('button');
                deleteBtn.innerHTML = '<i class="fas fa-times"></i>';
                deleteBtn.style.cssText = `
                    position: absolute;
                    top: 5px;
                    right: 5px;
                    background: rgba(255, 107, 107, 0.8);
                    border: none;
                    color: white;
                    width: 25px;
                    height: 25px;
                    border-radius: 50%;
                    cursor: pointer;
                    display: none;
                `;
                
                favoriteItem.appendChild(deleteBtn);
                
                favoriteItem.addEventListener('mouseenter', () => {
                    deleteBtn.style.display = 'block';
                });
                
                favoriteItem.addEventListener('mouseleave', () => {
                    deleteBtn.style.display = 'none';
                });
                
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    favorites.splice(index, 1);
                    saveFavorites();
                    renderFavorites();
                    showNotification('Removed from favorites', 'info');
                });
                
                favoritesList.appendChild(favoriteItem);
            });
        }
        
        function updateFavoriteIfExists(weatherData) {
            const locationName = `${weatherData.name}, ${weatherData.sys.country}`;
            const temp = `${Math.round(weatherData.main.temp)}°${currentUnit === 'metric' ? 'C' : 'F'}`;
            const desc = weatherData.weather[0].description;
            
            favorites.forEach(favorite => {
                if (favorite.name === locationName) {
                    favorite.temp = temp;
                    favorite.desc = desc;
                }
            });
            
            saveFavorites();
            renderFavorites();
        }
        
        function saveFavorites() {
            localStorage.setItem('weatherFavorites', JSON.stringify(favorites));
        }
        
        // UI Helper Functions
        function showLoading() {
            loadingElement.style.display = 'block';
        }
        
        function hideLoading() {
            loadingElement.style.display = 'none';
        }
        
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            
            // Auto-hide error after 5 seconds
            setTimeout(hideError, 5000);
        }
        
        function hideError() {
            errorMessage.style.display = 'none';
        }
        
        function showNotification(message, type = 'info') {
            // Remove existing notification
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            // Create notification
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${getNotificationIcon(type)}"></i>
                <span>${message}</span>
            `;
            
            // Style notification
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: ${getNotificationColor(type)};
                color: white;
                padding: 15px 25px;
                border-radius: 15px;
                display: flex;
                align-items: center;
                gap: 10px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                z-index: 1000;
                animation: slideInRight 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
            
            // Add animation styles if not present
            if (!document.querySelector('#notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes slideInRight {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOutRight {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        function getNotificationIcon(type) {
            switch(type) {
                case 'success': return 'check-circle';
                case 'error': return 'exclamation-circle';
                case 'warning': return 'exclamation-triangle';
                case 'info': return 'info-circle';
                default: return 'info-circle';
            }
        }
        
        function getNotificationColor(type) {
            switch(type) {
                case 'success': return '#00b894';
                case 'error': return '#ff7675';
                case 'warning': return '#fdcb6e';
                case 'info': return '#6c5ce7';
                default: return '#6c5ce7';
            }
        }
        
        // Demo data for testing (remove this and add your API key)
        if (!API_KEY || API_KEY === 'YOUR_API_KEY_HERE') {
            // Show demo mode notification
            showNotification('Using demo mode. Get a free API key from OpenWeatherMap for real data.', 'info');
            
            // Mock data for demonstration
            const mockWeatherData = {
                name: 'New York',
                sys: { country: 'US' },
                main: {
                    temp: 22,
                    humidity: 65,
                    pressure: 1013
                },
                weather: [{
                    description: 'Partly Cloudy',
                    icon: '02d',
                    main: 'Clouds'
                }],
                wind: { speed: 5 },
                visibility: 10000,
                coord: { lat: 40.7128, lon: -74.0060 }
            };
            
            const mockForecastData = {
                list: [
                    { dt: Date.now()/1000 + 86400, main: { temp: 24 }, weather: [{ description: 'Sunny', icon: '01d' }] },
                    { dt: Date.now()/1000 + 172800, main: { temp: 21 }, weather: [{ description: 'Cloudy', icon: '03d' }] },
                    { dt: Date.now()/1000 + 259200, main: { temp: 19 }, weather: [{ description: 'Rainy', icon: '10d' }] },
                    { dt: Date.now()/1000 + 345600, main: { temp: 23 }, weather: [{ description: 'Clear', icon: '01d' }] },
                    { dt: Date.now()/1000 + 432000, main: { temp: 20 }, weather: [{ description: 'Partly Cloudy', icon: '02d' }] }
                ]
            };
            
            // Override the getWeatherData function for demo
            const originalGetWeatherData = getWeatherData;
            getWeatherData = function(location) {
                updateCurrentWeather(mockWeatherData, { list: [{ components: { no2: 100 } }] });
                updateForecast(mockForecastData);
                updateBackground('Clouds');
                hideLoading();
            };
        }
    </script>
</body>
</html>